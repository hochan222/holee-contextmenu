{"version":3,"sources":["../../packages/esm/contextmenu.js","App.tsx","reportWebVitals.ts","index.tsx"],"names":["useContextMenu","outerRef","_a","useState","xPos","setXPos","_b","yPos","setYPos","_c","menu","showMenu","handleContextMenu","useCallback","event","rightPosition","bottomPosition","selector","pageX","pageY","current","getBoundingClientRect","top","bottom","left","right","preventDefault","ulBoundingClientRect","document","querySelector","position","window","innerWidth","innerHeight","ulWidth","ulHeight","console","log","handleClick","useEffect","addEventListener","removeEventListener","ContextMenu","className","menuOnClick","children","React","createElement","style","onClick","e","stopPropagation","menuOnClickHandler","onKeyDown","menuOnKeyDownHandler","role","App","useRef","option","setOption","eventTarget","target","dataset","ref","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.230e30dc.chunk.js","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport './contextmenu.css';\nvar findOutOfViewportPosition = function (rightPosition, bottomPosition) {\n    if (window.innerWidth <= rightPosition && window.innerHeight <= bottomPosition) {\n        return 'diagonal';\n    }\n    else if (window.innerWidth <= rightPosition) {\n        return 'right';\n    }\n    else if (window.innerHeight <= bottomPosition) {\n        return 'bottom';\n    }\n    return '';\n};\nvar $ = function (selector) { return document.querySelector(selector); };\nvar useContextMenu = function (outerRef) {\n    var _a = useState('0px'), xPos = _a[0], setXPos = _a[1];\n    var _b = useState('0px'), yPos = _b[0], setYPos = _b[1];\n    var _c = useState(false), menu = _c[0], showMenu = _c[1];\n    var handleContextMenu = useCallback(function (event) {\n        var _a;\n        setXPos(event.pageX + \"px\");\n        setYPos(event.pageY + \"px\");\n        if (outerRef.current.getBoundingClientRect().top <= event.pageY &&\n            outerRef.current.getBoundingClientRect().bottom >= event.pageY &&\n            outerRef.current.getBoundingClientRect().left <= event.pageX &&\n            outerRef.current.getBoundingClientRect().right >= event.pageX) {\n            event.preventDefault();\n            showMenu(true);\n            var ulBoundingClientRect = (_a = $('.holee-menu')) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n            if (ulBoundingClientRect) {\n                var position = findOutOfViewportPosition(ulBoundingClientRect.right, ulBoundingClientRect === null || ulBoundingClientRect === void 0 ? void 0 : ulBoundingClientRect.bottom);\n                var ulWidth = ulBoundingClientRect.right - ulBoundingClientRect.left;\n                var ulHeight = ulBoundingClientRect.bottom - ulBoundingClientRect.top;\n                console.log(position);\n                console.log('page', event.pageX, event.pageY);\n                console.log('ul', ulWidth, ulHeight);\n                if (position === 'diagonal') {\n                    setXPos(event.pageX - ulWidth + \"px\");\n                    setYPos(event.pageY - ulHeight + \"px\");\n                }\n                else if (position === 'right') {\n                    setXPos(event.pageX - ulWidth + \"px\");\n                    setYPos(event.pageY + \"px\");\n                }\n                else if (position === 'bottom') {\n                    setXPos(event.pageX + \"px\");\n                    setYPos(event.pageY - ulHeight + \"px\");\n                }\n                else {\n                    setXPos(event.pageX + \"px\");\n                    setYPos(event.pageY + \"px\");\n                }\n            }\n        }\n        else {\n            showMenu(false);\n        }\n    }, [showMenu, outerRef, setXPos, setYPos]);\n    var handleClick = useCallback(function () {\n        showMenu(false);\n    }, [showMenu]);\n    useEffect(function () {\n        document.addEventListener('click', handleClick);\n        document.addEventListener('contextmenu', handleContextMenu);\n        return function () {\n            document.addEventListener('click', handleClick);\n            document.removeEventListener('contextmenu', handleContextMenu);\n        };\n    });\n    return { xPos: xPos, yPos: yPos, menu: menu, showMenu: showMenu };\n};\nexport var ContextMenu = function (_a) {\n    var className = _a.className, outerRef = _a.outerRef, menuOnClick = _a.menuOnClick, children = _a.children;\n    var _b = useContextMenu(outerRef), xPos = _b.xPos, yPos = _b.yPos, menu = _b.menu, showMenu = _b.showMenu;\n    var menuOnClickHandler = function (e) {\n        e.stopPropagation();\n        menuOnClick(e);\n        showMenu(false);\n    };\n    var menuOnKeyDownHandler = function (e) {\n        e.stopPropagation();\n        menuOnClick(e);\n        showMenu(false);\n    };\n    if (menu) {\n        return (React.createElement(\"ul\", { className: 'holee-menu' + (className ? \" \" + className : ''), style: { top: yPos, left: xPos }, onClick: function (e) { return menuOnClickHandler(e); }, onKeyDown: function (e) { return menuOnKeyDownHandler(e); }, role: \"menu\" }, children));\n    }\n    return null;\n};\n","import React, { useRef, useState } from 'react';\nimport { ContextMenu } from 'typescript-react-test';\nimport './App.css';\n\nfunction App() {\n  const outerRef = useRef<HTMLDivElement>(null);\n  const [option, setOption] = useState<string | undefined>('null');\n\n  const menuOnClickHandler = (e: React.MouseEvent | React.KeyboardEvent<HTMLUListElement>) => {\n    const eventTarget = e.target as HTMLUListElement;\n    if (eventTarget) {\n      setOption(() => eventTarget.dataset.option);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h2>holee-context-menu</h2>\n      <p>⬇️ Click right mouse inside the red box ⬇️</p>\n\n      <ContextMenu outerRef={outerRef} menuOnClick={(e) => menuOnClickHandler(e)}>\n        <li data-option=\"profile\">profile</li>\n        <li data-option=\"send-message\">send message</li>\n        <li data-option=\"add-friend\">add friend</li>\n        <li data-option=\"play-game\">play game</li>\n        <li data-option=\"register-admin\">register admin(dismissal)</li>\n        <li data-option=\"block\">block(unblock)</li>\n        <li data-option=\"mute\">mute(unmute)</li>\n        <li data-option=\"forced-out\">forced out</li>\n      </ContextMenu>\n      <div ref={outerRef} className=\"red-box\"></div>\n\n      <p>\n        <strong>eventTarget.dataset.option: </strong> {option}\n      </p>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}